u = require('./index.js')

// prod
const jwt = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNmcml0eiIsImRldmljZSI6ImRfbHVtaW4xZG9ja2VydTIyIiwiY2FwYWJpbGl0eSI6IkB0cmFuc2l0aXZlLXJvYm90aWNzL3Jvcy10b29sIiwidmFsaWRpdHkiOjg2NDAwLCJpYXQiOjE3MTgzMjE4NzF9.ELgr9I6Y52Wq3tJiM3OHnfw-OxSH3O2Wpd1q11YQ0V4';

const run = async () => {
  const rosTool = await u.importCapability({
    jwt,
    // host: 'homedesk.local',
    // ssl: false
  });

  // rosTool.subscribe(1, '/odom');
  // rosTool.onData(() =>
  //   console.log(JSON.stringify(
  //     rosTool.deviceData.ros?.[1]?.messages?.odom?.pose?.pose, true, 2)),
  //   'ros/1/messages/odom/pose/pose'
  // );

  rosTool.subscribe(1, '/joy');
  rosTool.onData(() =>
    console.log(JSON.stringify(
      rosTool.deviceData, true, 2)),
    'ros/1/messages'
  );
};


run();
